# Apache2 Virtual Host Configuration for Shakes Clips
# Copy this content to /etc/apache2/sites-available/shakes-clips.conf

<VirtualHost *:80>
    ServerName shakes-clips.local
    ServerAlias www.shakes-clips.local
    DocumentRoot /home/shakes/Desktop/apache2server/shakes-clips

    # Alias for videos folder
    Alias /videos /home/shakes/Desktop/apache2server/videos

    # Main application directory
    <Directory /home/shakes/Desktop/apache2server/shakes-clips>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>

    # Videos directory - allow direct access
    <Directory /home/shakes/Desktop/apache2server/videos>
        Options Indexes FollowSymLinks
        AllowOverride None
        Require all granted
        
        # Enable streaming for large video files
        <IfModule mod_headers.c>
            Header set Accept-Ranges bytes
            Header set Cache-Control "public, max-age=2592000"
        </IfModule>
    </Directory>

    # Enable compression
    <IfModule mod_deflate.c>
        AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript application/javascript application/json
    </IfModule>

    # Set proper cache control
    <IfModule mod_expires.c>
        ExpiresActive On
        ExpiresByType text/html "access 1 hour"
        ExpiresByType text/css "access 1 month"
        ExpiresByType application/javascript "access 1 month"
        ExpiresByType video/mp4 "access 1 month"
        ExpiresByType video/x-matroska "access 1 month"
    </IfModule>

    ErrorLog ${APACHE_LOG_DIR}/shakes-clips-error.log
    CustomLog ${APACHE_LOG_DIR}/shakes-clips-access.log combined
</VirtualHost>
